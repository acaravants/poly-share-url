<link rel="import" href="../polymer/polymer-element.html">
<link rel="import" href="../file-drop-zone/file-drop-zone.html">
<link rel="import" href="../iron-form/iron-form.html">
<link rel="import" href="../paper-input/paper-input.html">
<link rel="import" href="../paper-input/paper-textarea.html">

<dom-module id="poly-share-url">
  <template>
    <style>
      
	:host{
		--title-size:22px;
		--subtitle-size:18px;
		--text-size:13px;
		--brand-white:#fefefe;
		--brand-black:#0d0d0d;
		--brand-gray:#d9d9d9;
		--brand--light-blue:#4d88ff;
		--brand-dark-blue:#004d66;
		--brand-purple:#8585e0;
		--brand-red:#ff3333;
		--brand--light-blue-2:#cee5ef;
		--layout-width:100%;
		--brand-transparent:rgba(0,0,0,0);
		--brand-transparent-background:rgba(0,0,0,0.4);
	}

	.card-container{
		display: grid;
		grid-template-columns: repeat(3,33%);
		grid-gap: 10px 5px;
		margin: 10px;
		padding: 15px;
	}

	.card__link{
		color:var(--brand--light-blue);
		text-decoration: none;
		padding:15px 12px;
		word-break: break-all;
	}

	.card__link:visited {
		text-decoration: none;
		
	}

	.card__link:hover {
		border-radius:10px;
		color:var(--brand-white);
		background:var(--brand-purple);
		box-shadow: 0px 20px 40px rgba(0, 0, 0, 0.3);
	}

	.card__link:active {
		 transform: translateY(2px);
	}


	.card__link h1{
		font-size:var(--title-size);
	}
	.card{
		display: flex;
		flex-flow: column wrap;
		border:2px solid var(--brand-gray);
		border-radius:10px;
		box-shadow: 0px 20px 40px rgba(0, 0, 0, 0.3);
		background:var(--brand-white);
		padding:10px;
	}

	.card-info{
		color:var(--brand-black);
		background:var(--brand--light-blue-2);
		max-height: 160px;
		overflow-y: auto;
		border-radius:5px;
		padding: 10px;
		word-break: break-all;
	}

	.upload-form__view{
		display:flex;
		background:var(--brand-white);
		border-radius:10px;
		background:var(--brand-white);
		border:2.5px solid var(--brand--light-blue);
	}

	.upload-form__button{
		border-radius:10px;
		background:var(--brand-white);
		border:2.5px solid var(--brand--light-blue);
		color:var(--brand--light-blue);
		font-weight:bold;
		text-decoration: none;
		padding:15px 12px;
		word-break: break-all;
		margin: 10px;
	}

	.upload-form__button:focus {
		outline: none;
	}

	.upload-form__button:hover {
		border-radius:10px;
		border:1.5px solid var(--brand-gray);
		color:var(--brand-white);
		background:var(--brand-gray);
		box-shadow: 0px 20px 40px rgba(0, 0, 0, 0.3);
	}

	.upload-form__button:active {
		 transform: translateY(2px);

	}

	.upload-form__cancel-button{
		border-radius:10px;
		background:var(--brand-white);
		border:2.5px solid var(--brand-red);
		color:var(--brand-red);
		font-weight:bold;
		text-decoration: none;
		padding:15px 12px;
		word-break: break-all;
		margin: 10px;
	}

	.upload-form__cancel-button:focus {
		outline: none;
	}

	.upload-form__cancel-button:hover {
		border-radius:10px;
		border:1.5px solid var(--brand-gray);
		color:var(--brand-white);
		background:var(--brand-gray);
		box-shadow: 0px 20px 40px rgba(0, 0, 0, 0.3);
	}

	.upload-form__cancel-button:active {
		 transform: translateY(2px);
	}

    file-drop-zone {
        border: 1px dashed transparent;
        color: #aaa;
        background-color: #efefef;
        width: 100%;
        height: 200px;
        margin: 0 auto;
        transition: all .3s;
    }

    file-drop-zone:hover > [slot='drop-zone'],
    file-drop-zone.dragover > [slot='drop-zone'] {
        color: #0b97c4;
        transition: all .3s;
    }
    file-drop-zone.errored {
        background-color: #FFEBEE;
        transition: all .3s;
    }
    file-drop-zone[has-files] {
        color: #2196F3;
        transition: all .3s;
    }
    [slot='drop-zone'] {
        text-align: center;
        font-size: 1.1em;
        --iron-icon-height: 64px;
        --iron-icon-width: 64px;
    }
    [slot='drop-zone'] > .title {
        font-size: 1.2em;
    }
    [slot='drop-zone'] > .small{
        font-size: 0.6em;
    }

	@media screen and (max-width:767px){
		:root{
		--title-size:18px;
		--subtitle-size:14px;
		--text-size:12px;
		--layout-width:100%;
	}

	.card-container{
		display: grid;
		grid-template-columns: repeat(2,50%);
		grid-gap: 8px 3px;
		margin: 4px;
		padding: 4px;
		width:100%;
	}

	}
    </style>
    <div class="form-container">
        <h3>Comparte tu recurso </h3>
        <file-drop-zone multiple accept="[[filesAccepted]]" files="{{files}}" last-error="{{error}}" on-error="onError">
            <div slot="drop-zone" class="layout vertical center center-justified">
                <iron-icon icon="description"></iron-icon>
                <div class="title">[[getMessage()]]</div>
                <!-- error message -->
                <div class="small">[[error.message]]</div>
                <!-- list of file selected -->
                <template is="dom-repeat" items="[[files]]">
                    <div class="small">[[item.name]]</div>
                </template>
            </div>
        </file-drop-zone>
        <iron-form>
            <form is="iron-form">
                <paper-input label="title" id="title" value="{{card.title}}">
                <paper-textarea label="description" id="description" value="{{card.description}}"></paper-textarea>
                <h2>{{card.title}}</h2>
                <paper-checkbox name="cheese" value="yes" checked></paper-checkbox>
            </form>
        </iron-form>
    </div>

	<div class="upload-form">
		<button class="upload-form__button" on-click="openForm">Upload file/link</button>
        <template is="dom-if" if="[[!hide]]">
            <div class="upload-form__view">
                <button class="upload-form__cancel-button" on-click="closeForm">Close</button>
            </div>
        </template>
	</div>

	<div class="card-container">
	 <template is="dom-repeat" items="[[dataUploads]]" as="info">
		<div class="card">
			<a class="card__link" href=""><h1>[[info.url]]</h1></a>
			<h3>[[info.author]]</h3>
			<div class="card-info">
			<p>[[info.description]]</p>
			</div>
		</div>
	 </template>
    </div>
  </template>

  <script>
    /**
     * `poly-share-url`
     * 
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class PolyShareUrl extends Polymer.Element {
      static get is() { return 'poly-share-url'; }
      static get properties() {
        return {
            filesAccepted: {
            type: String,
            value: ""
          },
            dataUploads: {
                type: Array,
                value: [{url:"link.org",description:"descrp",author:"author"}]
            },
			hide:{
				type:Boolean,
				value:true
            },
            files: {
                type: Array,
                value: [],
                computed: 'filesSaved()'
            },
            card: {
                card: Array,
                value: [],
                observer: 'getConsole'
            }
        };
      }

      getConsole(){
          console.log(this.card);
      }

      fileSaved(){
          console.log(this.files);
      }

      getMessage(){
          return `Here drop only type files: ${this.filesAccepted}`;
      }

      closeForm(){
            this.set('hide', true);
      }

      openForm(){
            this.set('hide', false);
      }
    }

    window.customElements.define(PolyShareUrl.is, PolyShareUrl);
  </script>
</dom-module>
